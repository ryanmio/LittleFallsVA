{{ define "main" }}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Get Involved - Little Falls Movement</title>
</head>
<body>


  <section class="get-involved-section">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <br><hr>
          <h1>Get Involved</h1>

          <h2>Our Plan</h2>
          <div class="scrolling-container">
            <img src="/images/our-plan/plan-1.jpg" alt="Plan 1">
            <img src="/images/our-plan/plan-2.jpg" alt="Plan 2">
            <img src="/images/our-plan/plan-3.jpg" alt="Plan 3">
          </div>

          <h2>Get Involved in the Little Falls Movement</h2>
          <p>Placeholder copy</p>

               <h2>Available Positions</h2>
        <p>If you are a local resident willing to volunteer your talents, our movement is looking for more support:</p>
        <ul class="position-list">
          <li>
            <strong>Press Officer:</strong> Responsible for managing media relations and promoting our cause to the public.
            <a href="mailto:hello@littlefallsva.com?subject=Press Officer" target="_blank" style="white-space: nowrap;">I'm interested ðŸ“§Â»</a>
          </li>
          <li>
            <strong>Social Media Director:</strong> Oversees our social media presence and engages with the community online.
            <a href="mailto:hello@littlefallsva.com?subject=Social Media Director" target="_blank" style="white-space: nowrap;">I'm interested ðŸ“§Â»</a>
          </li>
          <li>
            <strong>Graphic Designer:</strong> Creates visually appealing graphics for our promotional materials and social media.
            <a href="mailto:hello@littlefallsva.com?subject=Graphic Designer" target="_blank" style="white-space: nowrap;">I'm interested ðŸ“§Â»</a>
          </li>
          <li>
            <strong>Community Organizer:</strong> Organizes events, rallies, and other community activities to support our cause.
            <a href="mailto:hello@littlefallsva.com?subject=Community Organizer" target="_blank" style="white-space: nowrap;">I'm interested ðŸ“§Â»</a>
          </li>
        </ul>



            <h2>Share on Social Media</h2>
             <p>Help spread the word about the Little Falls movement by sharing on your favorite social media platforms:</p>
<div style="display:flex; flex-direction:row; justify-content:space-between;">
  <div style="flex:1; margin-right:10px;">
    <input type="text" readonly value="I'm supporting the Little Falls movement to rename Falls Church, VA! Learn more at littlefallsva.com" id="facebook-text" style="width: 100%; margin-bottom: 5px;" rows="2">
    <a href="https://www.facebook.com/sharer/sharer.php?u=https://littlefallsva.com&quote=I%27m%20supporting%20the%20Little%20Falls%20movement%20to%20rename%20Falls%20Church%2C%20VA%21%20Learn%20more%20at%20littlefallsva.com" target="_blank" rel="noopener noreferrer" class="btn btn-primary social-button">Share on Facebook</a>
  </div>
  <div style="flex:1; margin-right:10px;">
    <input type="text" readonly value="Join the Little Falls movement and help rename Falls Church, VA to Little Falls! Learn more at littlefallsva.com" style="width: 100%; margin-bottom: 5px;" rows="2">
    <a href="https://twitter.com/intent/tweet?url=https://littlefallsva.com&text=Join%20the%20Little%20Falls%20movement%20and%20help%20rename%20Falls%20Church,%20Virginia%20to%20Little%20Falls!" target="_blank" rel="noopener noreferrer" class="btn btn-primary social-button">Share on Twitter</a>
  </div>
  <div style="flex:1;">
    <input type="text" id="nextdoor-text" readonly value="Support the Little Falls movement to rename Falls Church, VA! Learn more and join us at littlefallsva.com" style="width: 100%; margin-bottom: 5px;" rows="2">
    <button onclick="copyAndOpenNextdoor('nextdoor-text')" class="btn btn-primary social-button">Copy + Open Nextdoor</button>
  </div>
</div>

<script>
  function copyToClipboard(elementId) {
    const el = document.getElementById(elementId);
    el.select();
    document.execCommand('copy');
    alert('Copied to Clipboard');
  }

  function copyAndOpenNextdoor(elementId) {
    copyToClipboard(elementId);
    window.open('https://nextdoor.com', '_blank');
  }
</script>

            

            <!-- Add the map container and marker message input here -->
<h2>Little Falls Movement Map</h2>
<p>Explore the map below to see the locations of Little Falls supporters, events, and points of interest related to the movement. Click on the map to add your own marker:</p>
<div id="map" style="width: 100%; height: 400px;"></div>
<label for="marker-message">Enter your marker message:</label>
<input type="text" id="marker-message" placeholder="I'm a supporter of the Little Falls Movement!">


        </div>
        </div>
        </div>
        </section>


  <style>
    .get-involved-section h2 {
      margin-top: 50px;
    }
    .position-list {
      list-style-type: disc;
      padding-left: 20px;
    }
    .position-list li {
      margin-bottom: 15px;
    }
    .social-button {
      margin-right: 10px;
      margin-bottom: 10px;
    }
    .scrolling-container {
      display: flex;
      overflow-x: auto;
      white-space: nowrap;
      margin-bottom: 20px;
    }
    .scrolling-container img {
      margin-right: 10px;
    }
  </style>

<script>
  var map = L.map('map').setView([38.882334, -77.171091], 13);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);

  // Load markers from DynamoDB
  function loadMarkers() {
    const apiUrl = 'https://ga0kkm2jp8.execute-api.us-east-2.amazonaws.com/prod';

    fetch(apiUrl)
      .then(response => response.json())
      .then(data => {
        console.log("Fetched data:", data);
        data.Items.forEach(item => {
          console.log('Latitude:', item.lat, 'Longitude:', item.lng);
          const latLng = L.latLng(item.lat, item.lng);
          L.marker(latLng)
            .addTo(map)
            .bindPopup(item.message);
        });
      })
      .catch(error => {
        console.error('Error loading markers:', error);
      });
  }

  map.whenReady(function() {
    loadMarkers();
  });

  // Add a new marker to the map when a user clicks
  map.on('click', function(e) {
    var message = document.getElementById('marker-message').value || "I'm a supporter of the Little Falls Movement!";
    L.marker(e.latlng)
      .addTo(map)
      .bindPopup(message);

    // Submit the marker to the Lambda function
    submitMarker(e.latlng, message);
  });

  // Submit the marker to the Lambda function
  async function submitMarker(latlng, message) {
    const apiUrl = 'https://ga0kkm2jp8.execute-api.us-east-2.amazonaws.com/prod/markers';

    try {
      const response = await fetch(apiUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ lat: latlng.lat, lng: latlng.lng, message: message })
      });

      const data = await response.json();
      console.log('Marker added successfully:', data);

      // Reload markers after adding a new marker
      loadMarkers();
    } catch (error) {
      console.error('Error adding marker:', error);
    }
  }
</script>

</body>
</html>
{{ end }}