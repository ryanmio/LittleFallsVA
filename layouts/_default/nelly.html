{{ define "main" }}
<style>
    @import url('https://fonts.googleapis.com/css2?family=IM+Fell+English+SC&display=swap');
html {
  scroll-behavior: smooth;
}

#scroll-container {
  position: relative;
  overflow-x: hidden;
}

.scroll-section {
  position: relative;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-attachment: fixed;
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
  opacity: 0;
  transition: opacity 1s ease-in-out;
}

.text-content {
  position: relative;
  z-index: 1;
  text-align: center;
  max-width: 80%;
  margin: 2rem auto;
  padding: 3rem;
  border-radius: 4px;
  margin-bottom: 1rem;
}

.chapter-heading {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.chapter-number {
  order: 1;
  margin-bottom: 4px;
  font-family: 'IM Fell English SC', serif; /* Old book font */
  font-size: 1.5rem;
  font-weight: bold;
  color: #333;
  text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3);
}

.chapter-title {
  order: 2;
  font-family: 'IM Fell English SC', serif;
  font-size: 1.2rem;
  font-weight: bold;
}
    
h1, h2 {
  font-family: 'IM Fell English SC', serif;
}

h1 {
  text-align: center;
  margin-top: 2rem;
  font-size: 2.75rem;
    font-weight: bold;
}

h2 {
  text-align: center;
  font-size: 1.5rem;
}

.text-content h3 {
  margin-bottom: 1rem;
  font-family: 'IM Fell English SC', serif;
}

.image-container {
  width: 100%;
  max-width: 600px;
  margin: -3rem auto 1rem;
}

.image-container img {
  width: 100%;
  object-fit: cover;
  border-radius: 4px;
}

.chapter-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: rgba(255, 255, 255, 0.8);
  padding: 10px;
  display: flex;
  justify-content: flex-start;
  overflow-x: auto;
  white-space: nowrap;
  z-index: 1000;
}

@media (max-width: 1000px) {
  .chapter-nav {
    justify-content: flex-start;
  }
}

.chapter-nav a {
  margin: 0 15px;
  padding: 10px 5px;
  text-decoration: none;
  color: #333;
  display: inline-block;
  border-bottom: 3px solid transparent;
  transition: all 0.3s;
}

.chapter-nav a:hover,
.chapter-nav a.active {
  color: #007BFF;
  border-bottom: 3px solid #007BFF;
}

.scroll-section {
  opacity: 0;
  transition: opacity 1s ease;
}

.scroll-section.visible {
  opacity: 1;
}

.chapter-nav a:hover {
  text-decoration: none;
  color: #007BFF;
}

.chapter-nav a:focus {
  outline: none;
  color: #007BFF;
}

.back-to-top {
  display: none;
  position: fixed;
  bottom: 80px;
  right: 20px;
  padding: 8px 12px;
  font-size: 20px;
  background-color: rgba(255, 255, 255, 0.8);
  color: #2c475d;
  border-radius: 4px;
  cursor: pointer;
  z-index: 1000;
}

.back-to-top.visible {
  display: block;
}

@media screen and (max-width: 768px) {
  .chapter-title {
    font-size: 18px;
    line-height: 1.5;
  }
  
  .image-container {
    max-width: calc(100% - 32px);
    padding-left: 16px;
    padding-right: 16px;
  }

  .text-content {
    max-width: 90%;
    padding: 2rem;
  }
}
    
.image-container cite {
  line-height: 1.6; /* Adjust this value to your preference */
  display: block;
  text-align: center;
}
    
.resources-footer {
  margin-top: 2rem;
  padding: 2rem;
  background-color: #f9f9f9;
  border: 1px solid #e0e0e0;
}

.resources-footer h2 {
  margin-bottom: 1.5rem;
}

.resource-item {
  margin-bottom: 1.5rem;
}

.resource-citation {
  margin-bottom: 0.5rem;
  font-weight: bold;
}

.resource-link {
  text-decoration: none;
  color: #2d495c;
}

.resource-link:hover {
  text-decoration: underline;
}

a.footnote-link {
  color: #2f4a5e !important;
  text-decoration: none !important;
}

a.footnote-link:hover {
  color: #76a0c2 !important; /* or your desired hover color */
  text-decoration: underline !important;
}

sup {
  padding-left: 0.15em !important;
}
  
    

</style>

<div class="chapter-nav">
  <a href="#chapter1">Prologue</a>
  <a href="#chapter1">Chapter 1</a>
  <a href="#chapter2">Chapter 2</a>
  <a href="#chapter3">Chapter 3</a>
  <a href="#chapter4">Chapter 4</a>
  <a href="#chapter5">Chapter 5</a>
  <a href="#chapter6">Chapter 6</a>
  <a href="#chapter7">Chapter 7</a>
  <a href="#chapter8">Chapter 8</a>
  <a href="#chapter9">Chapter 9</a>
  <a href="#chapter10">Chapter 10</a>
  <a href="#note">Note</a>  
</div>

<h1>Nelly's Journey</h1>
<h2>A Life in Chains and a Quest for Freedom</h2>
<p>The narrative presented herein has been meticulously reconstructed utilizing a diverse array of historical sources, including deed books, census records, and family wills. By carefully weaving these fragments together, we strive to tell the story of Nelly, an enslaved individual whose experiences reflect the complexities of our local history.
</p>

<div id="scroll-container">
  {{ .Content }}
</div>


<div class="back-to-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">â†‘</div>

<script>
  const scrollSections = document.querySelectorAll(".scroll-section");
  const backToTop = document.querySelector('.back-to-top');

  function onScroll() {
    scrollSections.forEach((section) => {
      const sectionTop = section.getBoundingClientRect().top;
      const sectionHeight = section.offsetHeight;

      if (sectionTop < window.innerHeight && sectionTop > -sectionHeight / 1.5) {
        section.classList.add("visible");
      } else {
        section.classList.remove("visible");
      }
    });

    if (window.scrollY > window.innerHeight / 1.2) {
      backToTop.classList.add("visible");
    } else {
      backToTop.classList.remove("visible");
    }
  }

  window.addEventListener("scroll", onScroll);
  onScroll();

  function updateActiveChapterLink() {
    let activeChapterLink = null;
    scrollSections.forEach((section, index) => {
      const sectionTop = section.getBoundingClientRect().top;

      if (sectionTop < window.innerHeight / 2 && sectionTop >= -window.innerHeight / 2) {
        const chapterLinks = document.querySelectorAll('.chapter-nav a');
        chapterLinks.forEach((link) => {
          link.classList.remove('active');
        });
        activeChapterLink = chapterLinks[index];
        activeChapterLink.classList.add('active');
      }
    });
  }

  window.addEventListener("scroll", () => {
    onScroll();
    updateActiveChapterLink();
  });

  const footnoteLinks = document.querySelectorAll('.footnote-link');
  footnoteLinks.forEach((link) => {
    link.addEventListener('click', (event) => {
      event.preventDefault();
      const footnoteId = link.getAttribute('href');
      const targetFootnote = document.querySelector(footnoteId);
      const targetFootnoteTop = targetFootnote.getBoundingClientRect().top + window.scrollY - 100;
      window.scrollTo({ top: targetFootnoteTop, behavior: 'smooth' });
    });
  });

  const backToTextLinks = document.querySelectorAll('.back-to-text');
  backToTextLinks.forEach((link) => {
    link.addEventListener('click', (event) => {
      event.preventDefault();
      const footnoteRefId = link.getAttribute('href');
      const targetFootnoteLink = document.querySelector(footnoteRefId);
      const targetFootnoteLinkTop = targetFootnoteLink.getBoundingClientRect().top + window.scrollY - 300;
      window.scrollTo({ top: targetFootnoteLinkTop, behavior: 'smooth' });
    });
  });
</script>






{{ end }}
