{{ define "main" }}
<div class="chapter-nav">
  <!-- Update the href and content to match your chapter IDs and titles -->
  <a href="#chapter1">Chapter 1</a>
  <a href="#chapter2">Chapter 2</a>
  <a href="#chapter3">Chapter 3</a>
</div>

<div>
  {{ .Content }}
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const navLinks = document.querySelectorAll(".chapter-nav a");
    const chapters = [];

    navLinks.forEach((link) => {
      const target = document.querySelector(link.getAttribute("href"));
      chapters.push(target);
      link.addEventListener("click", (e) => {
        e.preventDefault();
        target.scrollIntoView({ behavior: "smooth" });
      });
    });

    const setActiveNavLink = () => {
      let activeIndex = -1;
      chapters.forEach((chapter, index) => {
        const rect = chapter.getBoundingClientRect();
        if (rect.top < window.innerHeight / 2 && rect.bottom > 0) {
          activeIndex = index;
        }
      });

      navLinks.forEach((link, index) => {
        if (index === activeIndex) {
          link.classList.add("active");
        } else {
          link.classList.remove("active");
        }
      });
    };

    window.addEventListener("scroll", setActiveNavLink);
    setActiveNavLink();
  });
</script>

{{ end }}
